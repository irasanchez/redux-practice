/**
 * Challenge:
 * 
 * Do it again, from scratch!
 * 
 * 1. Action creators for increment, decrement, double, and halve
 * 2. Reducer to handle these actions 👆🏻
 */

const redux = require("redux")

//initial state
const initialState = {
    count: 0,
    favoriteThings: []
}

//action creators
function change (amount=1) {
    return {
        type: "CHANGE_COUNT",
        payload: amount
    }
}

function double () {
    return {
        type: "DOUBLE"
    }
}

function halve () {
    return {
        type: "HALVE"
    }
}

function addFavoriteThing(thing) {
    return {
        type: "ADD_FAVORITE_THING",
        payload: thing
    }
}

//reducer
function reducer (state = initialState, {type, payload}) {
    switch(type) {
        case "CHANGE_COUNT":
            return {
                ...state,
                count: state.count + payload
            }
        case "DOUBLE":
            return {
                ...state,
                count: state.count * 2
            }
        case "HALVE":
            return {
                ...state,
                count: Math.round(state.count / 2)
            }
        case "ADD_FAVORITE_THING":
            return {
              ...state,
              favoriteThings: [...state.favoriteThings, payload]
            }
        default:
            return state
    }
}

const store = redux.createStore(reducer)
store.subscribe(() => {
  console.log(store.getState())
})

store.dispatch(change(10))
store.dispatch(change(-3))
store.dispatch(change(5))
store.dispatch(double())
store.dispatch(change(-1))
store.dispatch(halve())
store.dispatch(addFavoriteThing("Raindrops on roses"))
store.dispatch(addFavoriteThing("Whiskers on kittens"))
